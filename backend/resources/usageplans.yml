FreeUsagePlan:
  Type: AWS::ApiGateway::UsagePlan
  Properties:
    ApiStages:
          -
            ApiId:
              Ref: ApiGatewayRestApi
            Stage: ${self:provider.stage}
    Description: ${self:service} free plan
    Quota:
      Limit: 50
      Offset: 0
      Period: DAY
    Tags:
      - Key: service
        Value: ${self:service}
    Throttle:
      BurstLimit: 3
      RateLimit: 1
    UsagePlanName: ${self:service}-${self:provider.stage}-free
AdvancedUsagePlan:
  Type: AWS::ApiGateway::UsagePlan
  Properties:
    ApiStages:
      -
        ApiId:
          Ref: ApiGatewayRestApi
        Stage: ${self:provider.stage}
    Description: ${self:service} advanced plan
    Quota:
      Limit: 500
      Offset: 0
      Period: DAY
    Tags:
      - Key: service
        Value: ${self:service}
    Throttle:
      BurstLimit: 10
      RateLimit: 3
    UsagePlanName: ${self:service}-${self:provider.stage}-advanced
ProfessionalUsagePlan:
  Type: AWS::ApiGateway::UsagePlan
  Properties:
    ApiStages:
          -
            ApiId:
              Ref: ApiGatewayRestApi
            Stage: ${self:provider.stage}
    Description: ${self:service} professional plan
    Quota:
      Limit: 2500
      Offset: 0
      Period: DAY
    Tags:
      - Key: service
        Value: ${self:service}
    Throttle:
      BurstLimit: 20
      RateLimit: 10
    UsagePlanName: ${self:service}-${self:provider.stage}-professional
